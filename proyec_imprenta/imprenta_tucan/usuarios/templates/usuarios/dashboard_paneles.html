{% extends 'usuarios/dashboard.html' %}
{% block extra_panels %}
<section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-8">
    <a href="{% url 'lista_auditoria' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition">
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-full bg-purple-50 text-purple-700 grid place-items-center">
                <span class="material-symbols-outlined">fact_check</span>
            </div>
            <div>
                <p class="text-sm text-gray-500">Auditoría</p>
                <p class="text-lg font-bold group-hover:text-purple-700">Ver registros</p>
            </div>
        </div>
    </a>
    <a href="/configuracion/" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition">
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-full bg-cyan-50 text-cyan-700 grid place-items-center">
                <span class="material-symbols-outlined">settings</span>
            </div>
            <div>
                <p class="text-sm text-gray-500">Configuración</p>
                <p class="text-lg font-bold group-hover:text-cyan-700">Preferencias</p>
            </div>
        </div>
    </a>
    <a href="{% url 'presupuestos:lista' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition">
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-full bg-orange-50 text-orange-700 grid place-items-center">
                <span class="material-symbols-outlined">request_quote</span>
            </div>
            <div>
                <p class="text-sm text-gray-500">Presupuestos</p>
                <p class="text-lg font-bold group-hover:text-orange-700">Ver lista</p>
            </div>
        </div>
    </a>
    <a href="{% url 'lista_proyecciones' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition">
        <div class="flex items-center gap-4">
            <div class="h-12 w-12 rounded-full bg-blue-50 text-blue-700 grid place-items-center">
                <span class="material-symbols-outlined">trending_up</span>
            </div>
            <div>
                <p class="text-sm text-gray-500">Proyecciones de Insumos</p>
                <p class="text-lg font-bold group-hover:text-blue-700">Ver proyecciones</p>
            </div>
        </div>
    </a>
    <!-- Panel Inteligencia: Clientes destacados (comportamiento consistente: navegar a Clientes) -->
    <a href="{% url 'lista_clientes' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition block">
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-3">
                <div class="h-12 w-12 rounded-full bg-yellow-50 text-yellow-700 grid place-items-center">
                    <span class="material-symbols-outlined">trophy</span>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Inteligencia</p>
                    <p class="text-lg font-bold">Clientes destacados</p>
                </div>
            </div>
            <span class="text-xs text-gray-400 group-hover:text-gray-600">Ir a Clientes</span>
        </div>
    </a>

    <!-- Panel Inteligencia: Ranking de Proveedores (comportamiento consistente: navegar a Proveedores) -->
    <a href="{% url 'lista_proveedores' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition block">
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-3">
                <div class="h-12 w-12 rounded-full bg-green-50 text-green-700 grid place-items-center">
                    <span class="material-symbols-outlined">star</span>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Inteligencia</p>
                    <p class="text-lg font-bold">Ranking de Proveedores</p>
                </div>
            </div>
            <span class="text-xs text-gray-400 group-hover:text-gray-600">Ir a Proveedores</span>
        </div>
    </a>

    <!-- Panel Automatización: Órdenes y Ofertas (comportamiento consistente: navegar al panel) -->
    <a href="{% url 'automatizacion_panel' %}" class="group bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:shadow-md transition block">
        <div class="flex items-center gap-3 mb-3">
            <div class="h-12 w-12 rounded-full bg-blue-50 text-blue-700 grid place-items-center">
                <span class="material-symbols-outlined">auto_mode</span>
            </div>
            <div>
                <p class="text-sm text-gray-500">Automatización</p>
                <p class="text-lg font-bold">Órdenes sugeridas y Ofertas</p>
                <p class="text-xs text-gray-400 group-hover:text-gray-600">Ir al panel de automatización</p>
            </div>
        </div>
    </a>

    <!-- Panel Automatización: Logs de Automatización -->
    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
        <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-3">
                <div class="h-12 w-12 rounded-full bg-gray-50 text-gray-700 grid place-items-center">
                    <span class="material-symbols-outlined">event</span>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Automatización</p>
                    <p class="text-lg font-bold">Logs de Automatización</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <button id="btnLogsDemo" class="bg-gray-200 hover:bg-gray-300 text-gray-900 font-semibold px-3 py-2 rounded">Generar demo</button>
                <button id="btnLogs" class="bg-gray-300 hover:bg-gray-400 text-gray-900 font-semibold px-3 py-2 rounded">Actualizar</button>
            </div>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full text-sm">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="py-2 px-3">Fecha</th>
                        <th class="py-2 px-3">Evento</th>
                        <th class="py-2 px-3">Descripción</th>
                        <th class="py-2 px-3 hidden md:table-cell">Usuario</th>
                    </tr>
                </thead>
                <tbody id="logsBody"></tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}

{% block notificaciones %}
<section class="mt-8">
    <h2 class="text-xl font-bold mb-4">Notificaciones</h2>
    {% for n in notificaciones %}
        <div class="bg-blue-50 border-l-4 border-blue-700 p-4 mb-2">
            <strong>Notificación:</strong> {{ n.mensaje }} <span class="text-xs text-gray-500">{{ n.fecha }}</span>
        </div>
    {% empty %}
        <div class="text-gray-400">No tienes notificaciones nuevas.</div>
    {% endfor %}
</section>
{% endblock %}

{% block scripts %}{% endblock %}
