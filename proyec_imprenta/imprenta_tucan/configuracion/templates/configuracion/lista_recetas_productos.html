{% extends 'base.html' %}
{% block content %}
<h1>Recetas de Productos</h1>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Producto</th>
            <th>Insumos</th>
            <th>Descripción</th>
            <th style="border-left:2px solid #adb5bd;">Activo</th>
            <th style="border-left:2px solid #adb5bd;">En Pedido</th>
            <th style="border-left:2px solid #adb5bd;">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for receta in recetas %}
        <tr class="{% if receta.producto.id in productos_con_pedidos %}table-success{% else %}table-secondary{% endif %}" style="border-bottom:1px solid #dee2e6;">
            <td>{{ receta.producto }}</td>
            <td>
                <ul>
                {% for insumo in receta.insumos.all %}
                    <li>{{ insumo.codigo }} - {{ insumo.nombre }}</li>
                {% empty %}
                    <li><em>Sin insumos</em></li>
                {% endfor %}
                </ul>
            </td>
            <td>{{ receta.descripcion }}</td>
            <td>{{ receta.activo|yesno:"Sí,No" }}</td>
            <td>{% if receta.producto.id in productos_con_pedidos %}<span class="badge bg-success">Sí</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</td>
            <td>
                <a href="{% url 'receta_producto_update' receta.id %}" class="btn btn-sm btn-primary">Editar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
